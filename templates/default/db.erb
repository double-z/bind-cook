;  !!!!!!!! WARNING !!!!!!!!
;
;   DO NOT EDIT THIS FILE BY HAND!
;   this is a dynamic zone, and changes are managed by chef/dhcp
;   use the dns_zones data bag to add entries to this zone. 
;   If you modify this file by hand you will cause bind to stop working.
;
;  !!!!!!!! WARNING !!!!!!!!
$TTL <%= @data["ttl"] %>
<% unless @data["zone_name"] =~ /in-addr\.arpa/i %>
$ORIGIN <%= @data["zone_name"] %>.
<% end %>
;  http://www.zytrax.com/books/dns/ch8/soa.html
@ in soa <%= @data["authority"] %>. <%= @data["email"] %> (  
  <%= Time.now.to_i %>  ; Serial
  <%= @data["refresh"] %> ; Refresh
  <%= @data["retry"] %>  ; Retry
  <%= @data["expire"] %>  ; Expire
  <%= @data["minimum"] %>  ; Minimum
)

<% if @data.has_key?("name_servers")   and  @data["name_servers"].length > 0  %>
  <%  @data["name_servers"].each do |k,v| %>
@    NS <%= k %>.
<%= k %>.  IN  A  <%= v %>
  <% end %>
<% end %>


;  !!!!!!!! WARNING !!!!!!!!
;
;   DO NOT EDIT THIS FILE BY HAND!
;   this is a dynamic zone, and changes are managed by chef/dhcp
;   use the dns_zones data bag to add entries to this zone. 
;   If you modify this file by hand you will cause bind to stop working.
;
;  !!!!!!!! WARNING !!!!!!!!
